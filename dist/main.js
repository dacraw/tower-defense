!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e);var i=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.maxHealth=i,this.currentHealth=i,this.coords=n,this.enemyColors=["#9be5e8","#e80c1e","#7f53a3","#ff871f","#ffff0f"],this.radius=r}var e,n,i;return e=t,(n=[{key:"draw",value:function(){this.ctx.beginPath();var t=this.coords[0],e=this.coords[1],n=2*Math.PI;this.ctx.arc(t,e,20,0,n),this.ctx.fillStyle=this.enemyColors[0],this.ctx.globalAlpha=this.health/this.maxHealth,this.ctx.fill(),this.ctx.globalAlpha=1,this.ctx.font="16px Arial",this.ctx.fillStyle="#ff871f",this.ctx.fillText(this.currentHealth,t,e)}},{key:"update",value:function(){this.coords[1]+=1}},{key:"clear",value:function(){this.ctx.clearRect(this.coords[0],this.coords[1],this.maxX,this.maxY)}}])&&r(e.prototype,n),i&&r(e,i),t}();function a(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.coords=n}var e,n,r;return e=t,(n=[{key:"draw",value:function(){var t;this.ctx.fillStyle="#eef2ed",(t=this.ctx).fillRect.apply(t,a(this.coords))}}])&&s(e.prototype,n),r&&s(e,r),t}();function l(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.coords=n,this.damage=1,this.speed=100}var e,n,r;return e=t,(n=[{key:"draw",value:function(){var t;this.ctx.strokeStyle="#d4d9d2",this.ctx.fillStyle="#bdbfbb",(t=this.ctx).fillRect.apply(t,l(this.coords))}},{key:"attack",value:function(t){console.log("hi"),t.currentHealth-=this.damage}}])&&u(e.prototype,n),r&&u(e,r),t}();function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.createElement("canvas"),this.canvas.width=.33*window.innerWidth,this.canvas.height=.9*window.innerHeight,this.canvas.style.border="1px solid black",this.ctx=this.canvas.getContext("2d"),this.battlefieldColor="#3dd11f",this.castleCoords=[.03*this.canvas.width,.92*this.canvas.height,.94*this.canvas.width,.07*this.canvas.height],this.firstTowerCoords=[this.castleCoords[0]+.02*this.canvas.width,this.castleCoords[1]+this.castleCoords[3],.133*this.canvas.width,-.09*this.canvas.height],this.numTowers=6,this.currentLevel=1,this.numEnemies=e,this.enemies={},this.towers={}}var e,n,r;return e=t,(n=[{key:"attackEnemies",value:function(){var t=this,e=(Object.keys(this.enemies).length,Object.keys(this.enemies).map((function(e){return t.enemies[e]})));Object.keys(this.towers).forEach((function(n){if(!t.towers[n].target){var r=Math.floor(Math.random()*e.length),i=e[r];i.coords[1]<t.canvas.height&&i.coords[1]>0&&t.towers[n].attack(i)}})),Object.keys(this.enemies).forEach((function(e){t.enemies[e].currentHealth<=0&&delete t.enemies[e]}))}},{key:"createCanvas",value:function(){document.body.append(this.canvas)}},{key:"drawBattlefield",value:function(){this.ctx.fillStyle=this.battlefieldColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}},{key:"drawCastle",value:function(){new c(this.ctx,this.castleCoords).draw()}},{key:"createTowers",value:function(){for(var t=0;t<this.numTowers;t++){var e=this.firstTowerCoords[0],n=this.firstTowerCoords[1],r=this.firstTowerCoords[2],i=this.firstTowerCoords[3],a=this.firstTowerCoords,o=new f(this.ctx,[e,n,r,i]);this.towers[t]=o,a[0]+=this.firstTowerCoords[2]+.02*this.canvas.width}}},{key:"drawTowers",value:function(t){var e=this.towers[t];e&&e.draw()}},{key:"createEnemies",value:function(){for(var t=0;t<this.numEnemies;t++){var e=Math.random()*this.canvas.width,n=-Math.random()*this.canvas.height,r=10*this.currentLevel;this.canvas.width-e>=0&&this.canvas.width-e<=20?e-=20:e<=20&&(e+=20),this.canvas.height+n>=0&&(n-=20);var a=new i(this.ctx,[e,n],20,r);this.enemies[t]=a}}},{key:"drawEnemies",value:function(t){var e=this.enemies[t];e&&e.coords[1]<=this.castleCoords[1]&&e.draw()}},{key:"clearEnemies",value:function(t){var e=this.enemies[t];e.clear(),e.coords[1]>=this.castleCoords[1]&&delete this.enemies[t]}},{key:"updateEnemies",value:function(t){var e=this.enemies[t];e.coords[1]<=this.castleCoords[1]&&e.update()}}])&&d(e.prototype,n),r&&d(e,r),t}();function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.remaining=e,this.timer=document.createElement("p"),this.timer.classList.add("timer"),this.timer.innerText=this.remaining,this.interval=setInterval(this.tick.bind(this),1e3)}var e,n,r;return e=t,(n=[{key:"create",value:function(){document.body.prepend(this.timer)}},{key:"tick",value:function(){this.remaining-=1,this.timer.innerText=this.remaining}},{key:"clear",value:function(){clearInterval(this.interval),this.timer.innerText=""}}])&&m(e.prototype,n),r&&m(e,r),t}();n(0);window.addEventListener("DOMContentLoaded",(function(){var t=new v(20);t.createCanvas(),t.drawBattlefield(),t.drawCastle(),t.createTowers(),t.drawTowers(),t.createEnemies(),t.drawEnemies();var e=new y(0);e.create();window.requestAnimationFrame((function n(){t.drawBattlefield(),t.drawCastle(),Object.keys(t.towers).forEach((function(e){t.drawTowers(e)})),e.remaining<0&&Object.keys(t.enemies).length&&(e.clear(),t.attackEnemies(),Object.keys(t.enemies).forEach((function(e){t.updateEnemies(e),t.clearEnemies(e),t.drawEnemies(e)}))),window.requestAnimationFrame(n)}))}))}]);